{"remainingRequest":"/home/clement/APIetienne/bccoin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/clement/APIetienne/bccoin/src/components/RetailerRegistration.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/clement/APIetienne/bccoin/src/components/RetailerRegistration.vue","mtime":1607801764748},{"path":"/home/clement/APIetienne/bccoin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/clement/APIetienne/bccoin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/clement/APIetienne/bccoin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/clement/APIetienne/bccoin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdSZXRhaWxlclJlZ2lzdHJhdGlvbicsCiAgICBjb21wdXRlZDogewogICAgICAgIC4uLm1hcEdldHRlcnMoewogICAgICAgICAgICB1c2VyOiAnYXV0aC91c2VyJywKICAgICAgICAgICAgcmV0Q2F0ZWdvcmllczogJ2dldFJldGFpbGVyQ2F0ZWdvcmllcycKICAgICAgICB9KQogICAgfSwKICAgIGRhdGEoKXsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgcHJldmlld0ltYWdlOiBudWxsLAogICAgICAgICAgICAgICBpbWFnZTogbnVsbCwKICAgICAgICAgICAgICAgZW5jb2RlZEltYWdlOiAnICAnLAogICAgICAgICAgICAgICBuYW1lUmV0YWlsZXI6ICcnLAogICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsCiAgICAgICAgICAgICAgIGNhdDogJycsIAogICAgICAgICAgICAgICBzZWxlY3RlZDogJycsCiAgICAgICAgICAgICAgIGJhc2U2NDogJycKCiAgICAgICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOnsKICAgICAgICB1cGxvYWRJbWFnZShlKXsKICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2UpOwogICAgICAgICAgICByZWFkZXIub25sb2FkID0gZSA9PnsKICAgICAgICAgICAgICAgIHRoaXMucHJldmlld0ltYWdlID0gZS50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhpbWFnZSk7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMucHJldmlld0ltYWdlKTsKICAgICAgICAgICAgICAgIC8vdGhpcy5pbWFnZSA9IGltYWdlOwogICAgICAgICAgICAgICAgdGhpcy5iYXNlNjQgPSB0aGlzLnByZXZpZXdJbWFnZS5zcGxpdCgiLCIpWzFdOwogICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmJhc2U2NCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIAoKICAgICAgICB9LAogICAgICAgIGFzeW5jIHJlZ2lzdGVyQXNSZXRhaWxlcigpIHsKICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLm5hbWVSZXRhaWxlcik7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5kZXNjcmlwdGlvbik7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5pbWFnZSk7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5lbmNvZGVkSW1hZ2UpOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKHRoaXMuYmFzZTY0KTsKCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICBmb3JtRGF0YS5zZXQoJ2ltYWdlJywgdGhpcy5pbWFnZSk7CiAgICAgICAgICAgICovCgogICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBheGlvcy5wdXQoJ2h0dHBzOi8vaGF1dGUtbG9pcmUub3JnL2FwaS91c2VyLycrdGhpcy51c2VyLmlkLCB7CiAgICAgICAgICAgICAgICBwaWN0dXJlczogdGhpcy5iYXNlNjQsCiAgICAgICAgICAgICAgICBzdG9yZU5hbWU6IHRoaXMubmFtZVJldGFpbGVyLAogICAgICAgICAgICAgICAgc3RvcmVUeXBlOiB0aGlzLnNlbGVjdGVkLAogICAgICAgICAgICAgICAgc3RvcmVEZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgIHJldGFpbGVyOiAxCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgCiAgICAgICAgfSwKICAgICAgICBhc3luYyBnZXRJbWcoKSB7CiAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGF4aW9zLmdldCgnaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS91c2VyLzUnKTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgLy9yZXR1cm4gcmVzLmRhdGEucGljdHVyZXM7CiAgICAgICAgfQogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5nZXRJbWcoKQogICAgfQp9Cg=="},{"version":3,"sources":["RetailerRegistration.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RetailerRegistration.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div>\n        <h4>Affiche formulaire inscription commer√ßant </h4>\n        <form  @submit.prevent=\"registerAsRetailer\">\n                <br><br><br><br>\n                <div>\n                    <label for=\"nameRetailer\">\n                        Nom : \n                    </label>\n                    <input type=\"text\" name=\"nameRetailer\" placeholder=\"Nom de votre magasin\" id=\"nameRetailer\" v-model=\"nameRetailer\">\n                </div>\n                <div>\n                    <label for=\"description\">\n                        Description : \n                    </label>\n                    <input type=\"text\" name=\"description\" placeholder=\"description\" id=\"description\" v-model=\"description\">\n                </div>\n                <div>\n                    <label for=\"Image\">\n                        Image : \n                    </label>\n                    <img :src=\"previewImage\" class=\"uploading-image\" />\n                    <input type=\"file\" accept=\"image/jpeg\" @change=uploadImage>\n                </div>\n                <div>\n                    <select v-model=\"selected\">\n                        <option v-for=\"categorie in retCategories\" :key=\"categorie.id\"> {{ categorie.category }} </option>\n                        <p>{{ selected }}</p>\n                    </select>\n                </div>\n                <br>\n                <div>\n                    <button class=\"btn btn-dark\" type=\"registerRetailer\">Create a retailer account</button>\n                    \n                </div>\n        </form>\n    </div>\n</template>\n\n\n<script>\nimport axios from 'axios';\nimport { mapGetters } from 'vuex';\n\nexport default {\n    name: 'RetailerRegistration',\n    computed: {\n        ...mapGetters({\n            user: 'auth/user',\n            retCategories: 'getRetailerCategories'\n        })\n    },\n    data(){\n            return {\n               previewImage: null,\n               image: null,\n               encodedImage: '  ',\n               nameRetailer: '',\n               description: '',\n               cat: '', \n               selected: '',\n               base64: ''\n\n            }\n    },\n    methods:{\n        uploadImage(e){\n            const image = e.target.files[0];\n            const reader = new FileReader();\n            reader.readAsDataURL(image);\n            reader.onload = e =>{\n                this.previewImage = e.target.result;\n                //console.log(image);\n                //console.log(this.previewImage);\n                //this.image = image;\n                this.base64 = this.previewImage.split(\",\")[1];\n                //console.log(this.base64);\n            };\n            \n\n        },\n        async registerAsRetailer() {\n            //console.log(this.nameRetailer);\n            //console.log(this.description);\n            //console.log(this.image);\n            //console.log(this.encodedImage);\n            //console.log(this.base64);\n\n            /*\n            var formData = new FormData();\n            formData.set('image', this.image);\n            */\n\n            const res = await axios.put('https://haute-loire.org/api/user/'+this.user.id, {\n                pictures: this.base64,\n                storeName: this.nameRetailer,\n                storeType: this.selected,\n                storeDescription: this.description,\n                retailer: 1\n            });\n\n            console.log(res);\n            \n        },\n        async getImg() {\n            const res = await axios.get('http://localhost:8000/api/user/5');\n            console.log(res);\n            //return res.data.pictures;\n        }\n    },\n    mounted() {\n        this.getImg()\n    }\n}\n</script>"]}]}