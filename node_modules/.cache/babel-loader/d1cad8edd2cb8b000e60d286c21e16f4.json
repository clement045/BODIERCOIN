{"remainingRequest":"/home/clement/APIetienne/bccoin/node_modules/babel-loader/lib/index.js!/home/clement/APIetienne/bccoin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/clement/APIetienne/bccoin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/clement/APIetienne/bccoin/src/components/UpdateAccount.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/clement/APIetienne/bccoin/src/components/UpdateAccount.vue","mtime":1607807645731},{"path":"/home/clement/APIetienne/bccoin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/clement/APIetienne/bccoin/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/clement/APIetienne/bccoin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/clement/APIetienne/bccoin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvY2xlbWVudC9BUElldGllbm5lL2JjY29pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL2NsZW1lbnQvQVBJZXRpZW5uZS9iY2NvaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7IC8vaW1wb3J0IFZ1ZUF4aW9zIGZyb20gJ3Z1ZS1heGlvcycKCmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKVnVlLnVzZShheGlvcyk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXNlclByb2ZpbGUiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9maWxlOiAnJwogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKHsKICAgIGF1dGhlbnRpY2F0ZWQ6ICdhdXRoL2F1dGhlbnRpY2F0ZWQnLAogICAgdXNlcjogJ2F1dGgvdXNlcicKICB9KSksCiAgbWV0aG9kczogewogICAgZ2V0UHJvZmlsZTogZnVuY3Rpb24gZ2V0UHJvZmlsZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGF4aW9zLmdldCgnaHR0cHM6Ly9oYXV0ZS1sb2lyZS5vcmcvYXBpL3VzZXIvJyArIHRoaXMudXNlci5pZCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICBfdGhpcy5wcm9maWxlID0gcmVzdWx0LmRhdGE7CiAgICAgICAgY29uc29sZS5sb2coX3RoaXMucHJvZmlsZSk7CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZVByb2ZpbGU6IGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgbGF0TG9uZzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuZ2V0TGF0TG9uZygpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBsYXRMb25nID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIC8vb24gcsOpY3Vww6hyZSBsYSBsYXQgZXQgbG9uZyBkYW5zIGNldHRlIHZhcmlhYmxlCiAgICAgICAgICAgICAgICBheGlvcy5wYXRjaCgnaHR0cHM6Ly9oYXV0ZS1sb2lyZS5vcmcvYXBpL3VzZXIvJyArIF90aGlzMi51c2VyLmlkLCB7CiAgICAgICAgICAgICAgICAgICdlbWFpbCc6IF90aGlzMi5wcm9maWxlLmVtYWlsLAogICAgICAgICAgICAgICAgICAnZmlyc3ROYW1lJzogX3RoaXMyLnByb2ZpbGUuZmlyc3ROYW1lLAogICAgICAgICAgICAgICAgICAnbGFzdE5hbWUnOiBfdGhpczIucHJvZmlsZS5sYXN0TmFtZSwKICAgICAgICAgICAgICAgICAgJ2FkZHJlc3MnOiBfdGhpczIucHJvZmlsZS5hZGRyZXNzLAogICAgICAgICAgICAgICAgICAnY2l0eSc6IF90aGlzMi5wcm9maWxlLmNpdHksCiAgICAgICAgICAgICAgICAgICdwb3N0YWxDb2RlJzogX3RoaXMyLnByb2ZpbGUucG9zdGFsQ29kZSwKICAgICAgICAgICAgICAgICAgJ25hbWUnOiBfdGhpczIucHJvZmlsZS5maXJzdE5hbWUgKyAiICIgKyBfdGhpczIucHJvZmlsZS5sYXN0TmFtZSwKICAgICAgICAgICAgICAgICAgJ2xhdGl0dWRlJzogbGF0TG9uZ1swXSwKICAgICAgICAgICAgICAgICAgLy9sYXRpdHVkZSBlc3QgbGUgcHJlbWllciDDqWzDqW1lbnQgZGUgbGEgdmFyaWFibGUgbGF0TG9uZwogICAgICAgICAgICAgICAgICAnbG9uZ2l0dWRlJzogbGF0TG9uZ1sxXSAvL2xvbmdpdHVkZSBlc3QgbGUgc2Vjb25kIMOpbMOpbWVudCBkZSBsYSB2YXJpYWJsZSBsYXRMb25nCgogICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgfSk7IC8vYWxlcnQoIkxhIG1pc2Ugw6Agam91ciBhIMOpdMOpIGVmZmVjdHXDqWUgYXZlYyBzdWNjw6hzIik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBnZXRMYXRMb25nOiBmdW5jdGlvbiBnZXRMYXRMb25nKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciB1cmwsIHBhcmFtcywgcmVzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1cmwgPSAiaHR0cHM6Ly9ub21pbmF0aW0ub3BlbnN0cmVldG1hcC5vcmcvc2VhcmNoLnBocCI7CiAgICAgICAgICAgICAgICBwYXJhbXMgPSB7CiAgICAgICAgICAgICAgICAgIHE6IF90aGlzMy5hZHJlc3MgKyAiICIgKyBfdGhpczMuY2l0eSArICIgIiArIF90aGlzMy5wb3N0Q29kZSwKICAgICAgICAgICAgICAgICAgZm9ybWF0OiAnanNvbicsCiAgICAgICAgICAgICAgICAgIGFkZHJlc3NkZXRhaWxzOiAxCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLmdldCh1cmwsIHsKICAgICAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIC8vb24gc3RvY2sgbGEgcsOpcG9uc2UgZGFucyBjZXR0ZSB2YXJpYWJsZQogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGFbMF0ubGF0KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhWzBdLmxvbik7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgW3Jlcy5kYXRhWzBdLmxhdCwgcmVzLmRhdGFbMF0ubG9uXSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0UHJvZmlsZSgpOwogICAgdGhpcy51cGRhdGVQcm9maWxlKCk7CiAgfQp9Ow=="},{"version":3,"sources":["UpdateAccount.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,OAAA,GAAA,MAAA,KAAA;AACA,OAAA,KAAA,MAAA,OAAA,C,CACA;;AAEA,SAAA,UAAA,QAAA,MAAA;AAEA,GAAA,CAAA,GAAA,CAAA,KAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA;AADA,KAAA;AAGA,GANA;AAQA,EAAA,QAAA,oBACA,UAAA,CAAA;AACA,IAAA,aAAA,EAAA,oBADA;AAEA,IAAA,IAAA,EAAA;AAFA,GAAA,CADA,CARA;AAgBA,EAAA,OAAA,EAAA;AAEA,IAAA,UAFA,wBAEA;AAAA;;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,sCAAA,KAAA,IAAA,CAAA,EAAA,EACA,IADA,CACA,UAAA,MAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,MAAA,CAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,OAAA;AACA,OALA;AAMA,KATA;AAWA,IAAA,aAXA,2BAWA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,MAAA,CAAA,UAAA,EADA;;AAAA;AACA,gBAAA,OADA;AACA;AAEA,gBAAA,KAAA,CAAA,KAAA,CAAA,sCAAA,MAAA,CAAA,IAAA,CAAA,EAAA,EAAA;AACA,2BAAA,MAAA,CAAA,OAAA,CAAA,KADA;AAEA,+BAAA,MAAA,CAAA,OAAA,CAAA,SAFA;AAGA,8BAAA,MAAA,CAAA,OAAA,CAAA,QAHA;AAIA,6BAAA,MAAA,CAAA,OAAA,CAAA,OAJA;AAKA,0BAAA,MAAA,CAAA,OAAA,CAAA,IALA;AAMA,gCAAA,MAAA,CAAA,OAAA,CAAA,UANA;AAOA,0BAAA,MAAA,CAAA,OAAA,CAAA,SAAA,GAAA,GAAA,GAAA,MAAA,CAAA,OAAA,CAAA,QAPA;AAQA,8BAAA,OAAA,CAAA,CAAA,CARA;AAQA;AACA,+BAAA,OAAA,CAAA,CAAA,CATA,CASA;;AATA,iBAAA,EAYA,IAZA,CAYA,UAAA,QAAA,EAAA;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA,QAAA;AACA,iBAdA,EAHA,CAkBA;;AAlBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA,KA9BA;AA+BA,IAAA,UA/BA,wBA+BA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,GADA,GACA,gDADA;AAEA,gBAAA,MAFA,GAEA;AACA,kBAAA,CAAA,EAAA,MAAA,CAAA,MAAA,GAAA,GAAA,GAAA,MAAA,CAAA,IAAA,GAAA,GAAA,GAAA,MAAA,CAAA,QADA;AAEA,kBAAA,MAAA,EAAA,MAFA;AAGA,kBAAA,cAAA,EAAA;AAHA,iBAFA;AAAA;AAAA,uBAOA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA;AAAA,kBAAA,MAAA,EAAA;AAAA,iBAAA,CAPA;;AAAA;AAOA,gBAAA,GAPA;AAOA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,GAAA;AACA,gBAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,GAAA;AATA,kDAUA,CAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,GAAA,EAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,GAAA,CAVA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA;AA3CA,GAhBA;AA8DA,EAAA,OA9DA,qBA8DA;AACA,SAAA,UAAA;AACA,SAAA,aAAA;AACA;AAjEA,CAAA","sourcesContent":["<template>\n  <div>\n    <br>\n    <h3>Vos informations personnelles :</h3>\n    <br><br>\n\n    <form class=\"form\" @submit.prevent=\"updateProfile\">\n      <label>\n        <textarea class=\"border rounded p-3\" v-model=\"profile.firstName\"></textarea>\n      </label>\n      <tag class=\"border rounded p-3\">Prénom</tag>\n      <p></p>\n      <label>\n        <textarea class=\"border rounded p-3\" v-model=\"profile.lastName\"></textarea>\n      </label>\n      <tag class=\"border rounded p-3\">Nom</tag>\n      <p></p>\n      <label>\n        <textarea class=\"border rounded p-3\" v-model=\"profile.email\"></textarea>\n      </label>\n      <tag class=\"border rounded p-3\">Mail</tag>\n      <p></p>\n      <label>\n        <textarea class=\"border rounded p-3\" v-model=\"profile.address\"></textarea>\n      </label>\n      <tag class=\"border rounded p-3\">Adresse</tag>\n      <p></p>\n      <label>\n        <textarea class=\"border rounded p-3\" v-model=\"profile.city\"></textarea>\n      </label>\n      <tag class=\"border rounded p-3\">Ville</tag>\n      <p></p>\n      <label>\n        <textarea class=\"border rounded p-3\" v-model=\"profile.postalCode\"></textarea>\n      </label>\n      <tag class=\"border rounded p-3\">Code postal</tag>\n      <p></p>\n      <button type=\"submit\" class=\"border btn btn-lg btn-dark rounded p-3\">Editer le profil</button>\n    </form>\n    <br>\n    <br>\n  </div>\n</template>\n\n<script>\n\nimport Vue from 'vue'\nimport axios from 'axios'\n//import VueAxios from 'vue-axios'\n\nimport {mapGetters} from 'vuex';\n\nVue.use( axios)\n\nexport default {\n  name: \"UserProfile\",\n  data() {\n    return {\n      profile: ''\n    }\n  },\n\n  computed: {\n    ...mapGetters({\n      authenticated: 'auth/authenticated',\n      user: 'auth/user'\n    }),\n\n  },\n\n  methods: {\n\n    getProfile() {\n      axios.get('https://haute-loire.org/api/user/' + this.user.id)\n          .then((result) => {\n            console.log(result);\n            this.profile = result.data;\n            console.log(this.profile)\n          })\n    },\n\n    async updateProfile() {\n      let latLong = await this.getLatLong(); //on récupère la lat et long dans cette variable\n\n      axios.patch(('https://haute-loire.org/api/user/' + this.user.id), {\n        'email': this.profile.email,\n        'firstName': this.profile.firstName,\n        'lastName': this.profile.lastName,\n        'address': this.profile.address,\n        'city': this.profile.city,\n        'postalCode': this.profile.postalCode,\n        'name': this.profile.firstName+\" \"+this.profile.lastName,\n        'latitude': latLong[0], //latitude est le premier élément de la variable latLong\n        'longitude': latLong[1]  //longitude est le second élément de la variable latLong\n                    \n      })\n          .then((response) => {\n            console.log(response);\n          });\n          //alert(\"La mise à jour a été effectuée avec succès\");\n    },\n    async getLatLong() { \n            let url = \"https://nominatim.openstreetmap.org/search.php\";\n            let params = {\n                q: this.adress+\" \"+this.city+\" \"+this.postCode,\n                format: 'json',\n                addressdetails: 1\n            };\n            const res = await axios.get(url, {params: params}); //on stock la réponse dans cette variable\n            console.log(res.data[0].lat);\n            console.log(res.data[0].lon);\n            return [res.data[0].lat, res.data[0].lon]; //on retourne un tableau avec les 2 éléments\n\n        }\n  },\n\n  mounted() {\n    this.getProfile();\n    this.updateProfile()\n  }\n}\n\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/components"}]}