{"remainingRequest":"/home/clement/APIetienne/BODIERCOIN/node_modules/babel-loader/lib/index.js!/home/clement/APIetienne/BODIERCOIN/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/clement/APIetienne/BODIERCOIN/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/clement/APIetienne/BODIERCOIN/src/components/UpdateAccount.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/clement/APIetienne/BODIERCOIN/src/components/UpdateAccount.vue","mtime":1607807645731},{"path":"/home/clement/APIetienne/BODIERCOIN/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/clement/APIetienne/BODIERCOIN/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/clement/APIetienne/BODIERCOIN/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/clement/APIetienne/BODIERCOIN/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvY2xlbWVudC9BUElldGllbm5lL0JPRElFUkNPSU4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICIvaG9tZS9jbGVtZW50L0FQSWV0aWVubmUvQk9ESUVSQ09JTi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsgLy9pbXBvcnQgVnVlQXhpb3MgZnJvbSAndnVlLWF4aW9zJwoKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwpWdWUudXNlKGF4aW9zKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVc2VyUHJvZmlsZSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHByb2ZpbGU6ICcnCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoewogICAgYXV0aGVudGljYXRlZDogJ2F1dGgvYXV0aGVudGljYXRlZCcsCiAgICB1c2VyOiAnYXV0aC91c2VyJwogIH0pKSwKICBtZXRob2RzOiB7CiAgICBnZXRQcm9maWxlOiBmdW5jdGlvbiBnZXRQcm9maWxlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KCdodHRwczovL2hhdXRlLWxvaXJlLm9yZy9hcGkvdXNlci8nICsgdGhpcy51c2VyLmlkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAgIF90aGlzLnByb2ZpbGUgPSByZXN1bHQuZGF0YTsKICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5wcm9maWxlKTsKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlUHJvZmlsZTogZnVuY3Rpb24gdXBkYXRlUHJvZmlsZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBsYXRMb25nOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi5nZXRMYXRMb25nKCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGxhdExvbmcgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgLy9vbiByw6ljdXDDqHJlIGxhIGxhdCBldCBsb25nIGRhbnMgY2V0dGUgdmFyaWFibGUKICAgICAgICAgICAgICAgIGF4aW9zLnBhdGNoKCdodHRwczovL2hhdXRlLWxvaXJlLm9yZy9hcGkvdXNlci8nICsgX3RoaXMyLnVzZXIuaWQsIHsKICAgICAgICAgICAgICAgICAgJ2VtYWlsJzogX3RoaXMyLnByb2ZpbGUuZW1haWwsCiAgICAgICAgICAgICAgICAgICdmaXJzdE5hbWUnOiBfdGhpczIucHJvZmlsZS5maXJzdE5hbWUsCiAgICAgICAgICAgICAgICAgICdsYXN0TmFtZSc6IF90aGlzMi5wcm9maWxlLmxhc3ROYW1lLAogICAgICAgICAgICAgICAgICAnYWRkcmVzcyc6IF90aGlzMi5wcm9maWxlLmFkZHJlc3MsCiAgICAgICAgICAgICAgICAgICdjaXR5JzogX3RoaXMyLnByb2ZpbGUuY2l0eSwKICAgICAgICAgICAgICAgICAgJ3Bvc3RhbENvZGUnOiBfdGhpczIucHJvZmlsZS5wb3N0YWxDb2RlLAogICAgICAgICAgICAgICAgICAnbmFtZSc6IF90aGlzMi5wcm9maWxlLmZpcnN0TmFtZSArICIgIiArIF90aGlzMi5wcm9maWxlLmxhc3ROYW1lLAogICAgICAgICAgICAgICAgICAnbGF0aXR1ZGUnOiBsYXRMb25nWzBdLAogICAgICAgICAgICAgICAgICAvL2xhdGl0dWRlIGVzdCBsZSBwcmVtaWVyIMOpbMOpbWVudCBkZSBsYSB2YXJpYWJsZSBsYXRMb25nCiAgICAgICAgICAgICAgICAgICdsb25naXR1ZGUnOiBsYXRMb25nWzFdIC8vbG9uZ2l0dWRlIGVzdCBsZSBzZWNvbmQgw6lsw6ltZW50IGRlIGxhIHZhcmlhYmxlIGxhdExvbmcKCiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9KTsgLy9hbGVydCgiTGEgbWlzZSDDoCBqb3VyIGEgw6l0w6kgZWZmZWN0dcOpZSBhdmVjIHN1Y2PDqHMiKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldExhdExvbmc6IGZ1bmN0aW9uIGdldExhdExvbmcoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHVybCwgcGFyYW1zLCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHVybCA9ICJodHRwczovL25vbWluYXRpbS5vcGVuc3RyZWV0bWFwLm9yZy9zZWFyY2gucGhwIjsKICAgICAgICAgICAgICAgIHBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgcTogX3RoaXMzLmFkcmVzcyArICIgIiArIF90aGlzMy5jaXR5ICsgIiAiICsgX3RoaXMzLnBvc3RDb2RlLAogICAgICAgICAgICAgICAgICBmb3JtYXQ6ICdqc29uJywKICAgICAgICAgICAgICAgICAgYWRkcmVzc2RldGFpbHM6IDEKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KHVybCwgewogICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgLy9vbiBzdG9jayBsYSByw6lwb25zZSBkYW5zIGNldHRlIHZhcmlhYmxlCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YVswXS5sYXQpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGFbMF0ubG9uKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBbcmVzLmRhdGFbMF0ubGF0LCByZXMuZGF0YVswXS5sb25dKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5nZXRQcm9maWxlKCk7CiAgICB0aGlzLnVwZGF0ZVByb2ZpbGUoKTsKICB9Cn07"},{"version":3,"sources":["UpdateAccount.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <br>\n    <h3>Vos informations personnelles :</h3>\n    <br><br>\n\n    <form class=\"form\" @submit.prevent=\"updateProfile\">\n      <label>\n        <textarea class=\"border rounded p-3\" v-model=\"profile.firstName\"></textarea>\n      </label>\n      <tag class=\"border rounded p-3\">Prénom</tag>\n      <p></p>\n      <label>\n        <textarea class=\"border rounded p-3\" v-model=\"profile.lastName\"></textarea>\n      </label>\n      <tag class=\"border rounded p-3\">Nom</tag>\n      <p></p>\n      <label>\n        <textarea class=\"border rounded p-3\" v-model=\"profile.email\"></textarea>\n      </label>\n      <tag class=\"border rounded p-3\">Mail</tag>\n      <p></p>\n      <label>\n        <textarea class=\"border rounded p-3\" v-model=\"profile.address\"></textarea>\n      </label>\n      <tag class=\"border rounded p-3\">Adresse</tag>\n      <p></p>\n      <label>\n        <textarea class=\"border rounded p-3\" v-model=\"profile.city\"></textarea>\n      </label>\n      <tag class=\"border rounded p-3\">Ville</tag>\n      <p></p>\n      <label>\n        <textarea class=\"border rounded p-3\" v-model=\"profile.postalCode\"></textarea>\n      </label>\n      <tag class=\"border rounded p-3\">Code postal</tag>\n      <p></p>\n      <button type=\"submit\" class=\"border btn btn-lg btn-dark rounded p-3\">Editer le profil</button>\n    </form>\n    <br>\n    <br>\n  </div>\n</template>\n\n<script>\n\nimport Vue from 'vue'\nimport axios from 'axios'\n//import VueAxios from 'vue-axios'\n\nimport {mapGetters} from 'vuex';\n\nVue.use( axios)\n\nexport default {\n  name: \"UserProfile\",\n  data() {\n    return {\n      profile: ''\n    }\n  },\n\n  computed: {\n    ...mapGetters({\n      authenticated: 'auth/authenticated',\n      user: 'auth/user'\n    }),\n\n  },\n\n  methods: {\n\n    getProfile() {\n      axios.get('https://haute-loire.org/api/user/' + this.user.id)\n          .then((result) => {\n            console.log(result);\n            this.profile = result.data;\n            console.log(this.profile)\n          })\n    },\n\n    async updateProfile() {\n      let latLong = await this.getLatLong(); //on récupère la lat et long dans cette variable\n\n      axios.patch(('https://haute-loire.org/api/user/' + this.user.id), {\n        'email': this.profile.email,\n        'firstName': this.profile.firstName,\n        'lastName': this.profile.lastName,\n        'address': this.profile.address,\n        'city': this.profile.city,\n        'postalCode': this.profile.postalCode,\n        'name': this.profile.firstName+\" \"+this.profile.lastName,\n        'latitude': latLong[0], //latitude est le premier élément de la variable latLong\n        'longitude': latLong[1]  //longitude est le second élément de la variable latLong\n                    \n      })\n          .then((response) => {\n            console.log(response);\n          });\n          //alert(\"La mise à jour a été effectuée avec succès\");\n    },\n    async getLatLong() { \n            let url = \"https://nominatim.openstreetmap.org/search.php\";\n            let params = {\n                q: this.adress+\" \"+this.city+\" \"+this.postCode,\n                format: 'json',\n                addressdetails: 1\n            };\n            const res = await axios.get(url, {params: params}); //on stock la réponse dans cette variable\n            console.log(res.data[0].lat);\n            console.log(res.data[0].lon);\n            return [res.data[0].lat, res.data[0].lon]; //on retourne un tableau avec les 2 éléments\n\n        }\n  },\n\n  mounted() {\n    this.getProfile();\n    this.updateProfile()\n  }\n}\n\n</script>\n\n<style scoped>\n\n</style>"],"sourceRoot":"src/components"}]}