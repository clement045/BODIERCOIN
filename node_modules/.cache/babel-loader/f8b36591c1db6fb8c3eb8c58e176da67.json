{"remainingRequest":"/home/clement/APIetienne/BODIERCOIN/node_modules/babel-loader/lib/index.js!/home/clement/APIetienne/BODIERCOIN/node_modules/eslint-loader/index.js??ref--13-0!/home/clement/APIetienne/BODIERCOIN/src/store/subscriber.js","dependencies":[{"path":"/home/clement/APIetienne/BODIERCOIN/src/store/subscriber.js","mtime":1607801764748},{"path":"/home/clement/APIetienne/BODIERCOIN/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/clement/APIetienne/BODIERCOIN/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/clement/APIetienne/BODIERCOIN/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwpzdG9yZS5zdWJzY3JpYmUoZnVuY3Rpb24gKG11dGF0aW9uKSB7CiAgLy9vbiAiw6ljb3V0ZSIgY2hhcXVlIG11dGF0aW9uCiAgLy9jb25zb2xlLmxvZyhtdXRhdGlvbik7CiAgc3dpdGNoIChtdXRhdGlvbi50eXBlKSB7CiAgICBjYXNlICdhdXRoL1NFVF9UT0tFTic6CiAgICAgIC8vc2kgbXV0YXRpb24gdmllbnQgZGUgYXV0aCAvIFNFVF9UT0tFTgogICAgICAvL2NvbnNvbGUubG9nKG11dGF0aW9uLnBheWxvYWQpOwogICAgICBpZiAobXV0YXRpb24ucGF5bG9hZCkgewogICAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAiQmVhcmVyICIuY29uY2F0KG11dGF0aW9uLnBheWxvYWQpOyAvL29uIGFqb3V0ZSBsZSBoZWFkZXIgw6AgbGEgcmVxdWV0ZQoKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBtdXRhdGlvbi5wYXlsb2FkKTsgLy9ldCBvbiBnYXJkZSBsZSB0b2tlbiBlbiBsb2NhbCBzdG9yYWdlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IG51bGw7IC8vc2lub24gcGFzIGRlIGhlYWRlcgoKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsgLy9ldCBvbiBlbmxtZXZlIGxlIHRva2VuIGR1IGxvY2FsIHN0b3JhZ2UKICAgICAgfQoKICAgICAgYnJlYWs7CiAgfQp9KTs="},{"version":3,"sources":["/home/clement/APIetienne/BODIERCOIN/src/store/subscriber.js"],"names":["store","axios","subscribe","mutation","type","payload","defaults","headers","common","localStorage","setItem","removeItem"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEAD,KAAK,CAACE,SAAN,CAAgB,UAACC,QAAD,EAAc;AAAE;AAC5B;AAEA,UAAOA,QAAQ,CAACC,IAAhB;AACI,SAAK,gBAAL;AAAuB;AACnB;AACA,UAAID,QAAQ,CAACE,OAAb,EAAsB;AAClBJ,QAAAA,KAAK,CAACK,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,qBAA2DL,QAAQ,CAACE,OAApE,EADkB,CAC6D;;AAC/EI,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BP,QAAQ,CAACE,OAAvC,EAFkB,CAE+B;AACpD,OAHD,MAGO;AACHJ,QAAAA,KAAK,CAACK,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,IAAjD,CADG,CACoD;;AACvDC,QAAAA,YAAY,CAACE,UAAb,CAAwB,OAAxB,EAFG,CAE+B;AACrC;;AAED;AAXR;AAeH,CAlBD","sourcesContent":["import store from '@/store';\nimport axios from 'axios';\n\nstore.subscribe((mutation) => { //on \"écoute\" chaque mutation\n    //console.log(mutation);\n    \n    switch(mutation.type) { \n        case 'auth/SET_TOKEN': //si mutation vient de auth / SET_TOKEN\n            //console.log(mutation.payload);\n            if (mutation.payload) { \n                axios.defaults.headers.common['Authorization'] = `Bearer ${mutation.payload}`; //on ajoute le header à la requete\n                localStorage.setItem('token', mutation.payload); //et on garde le token en local storage\n            } else {\n                axios.defaults.headers.common['Authorization'] = null; //sinon pas de header\n                localStorage.removeItem('token'); //et on enlmeve le token du local storage\n            }\n\n            break;\n    }\n\n\n})"]}]}